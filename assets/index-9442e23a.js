var we=Object.defineProperty;var De=(a,t,n)=>t in a?we(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n;var re=(a,t,n)=>(De(a,typeof t!="symbol"?t+"":t,n),n);import"./base-41723ac6.js";import{E as $e}from"./el-button-b9f85dff.js";import{_ as M,a2 as K,t as S,o as f,c as b,L as $,M as W,U as H,i as u,G as P,F as I,j as Q,B as X,v as V,r as x,C as k,Y as O,E as q,H as Z,R as G,am as de,an as ie,ar as j,w as T,b as A,D as pe,a6 as ve,P as ee,S as E,a as R,d as Le,a4 as Ce,a9 as Ve,I as Y}from"./index-fd26a47b.js";import{C as fe}from"./index-9250dd54.js";import{E as xe,a as Ie}from"./el-tab-pane-9aa05233.js";import{E as Be,a as ke}from"./el-form-item-ea9893ee.js";import{E as Ae}from"./el-input-478b1b37.js";import"./index-7129bb4f.js";import"./index-b50b0ffd.js";import"./get-e7313515.js";import"./index-8ae622c7.js";import"./typescript-defaf979.js";import"./event-e06a23af.js";import"./strings-de7ec0f8.js";import"./aria-60e0cdc6.js";import"./vnode-62f567d2.js";import"./objects-aaeae07b.js";import"./isNil-c75b1b34.js";const Se=["onClick"],Me={key:0,class:"line"},Pe={__name:"AddNodeBtn",props:{endLine:{type:Boolean,default:!0},addType:{type:String,default:"node"}},emits:["toAdd"],setup(a,{emit:t}){const n=a,e=K(),l=S("addNodeDialogRef"),o=d=>{if(d.id==="canvas-main"||!d)return{x:0,y:0};const c=o(d.offsetParent);return{x:c.x+d.offsetLeft,y:c.y+d.offsetTop}},s=d=>{t("toAdd",d)},r=Q(),h=d=>{if(n.addType==="branch")return t("toAdd");const{target:c,offsetY:y}=d,{x:m,y:C}=o(c);l.value.show({x:c.clientWidth+m,y:y+C},s,r)};return(d,c)=>(f(),b(I,null,[$("div",W({class:"add-node"},u(e),{onClick:H(h,["stop"])})," + ",16,Se),a.endLine?(f(),b("div",Me)):P("",!0)],64))}},te=M(Pe,[["__scopeId","data-v-77b265a2"]]);const Re=["onClick"],Ee={__name:"SubBtn",emits:["toSub"],setup(a,{emit:t}){const n=S("hoverStack"),e=l=>{n.value=[],t("toSub")};return(l,o)=>(f(),b("div",{class:"sub-node",onClick:H(e,["stop"])}," - ",8,Re))}},_e=M(Ee,[["__scopeId","data-v-554bf87e"]]),Fe={},Te={class:"node-wrapper"},je=$("div",{class:"c-circle c-start"}," start ",-1),Oe=[je];function Ue(a,t){return f(),b("div",Te,Oe)}const He=M(Fe,[["render",Ue]]),ze={},Ye={class:"node-wrapper"},qe=$("div",{class:"c-circle c-end"}," end ",-1),Ke=[qe];function We(a,t){return f(),b("div",Ye,Ke)}const Xe=M(ze,[["render",We]]),Ge={},Je={class:"node-wrapper"},Qe=$("div",{class:"c-circle c-other"}," Error ",-1);function Ze(a,t){return f(),b("div",Je,[X(a.$slots,"default"),Qe])}const me=M(Ge,[["render",Ze]]),ne=a=>{var t;return a?(t=a==null?void 0:a.branchList)!=null&&t.length?a.branchList.reduce((n,e)=>n+Math.max(...e.map(l=>ne(l)),1),0):1:0},le=a=>Array.isArray(a)?Math.max(...a.map(t=>ne(t)),1):1,et=$("div",{class:"line"},null,-1),he={__name:"BranchRender",props:{modelValue:{type:Object,default:()=>({})},curNode:{type:Object,default:()=>({})}},emits:["addBranch","removeBranch","update:modelValue"],setup(a,{emit:t}){const n=a,e=V({get:()=>n.modelValue||[],set:i=>t("update:modelValue",i)}),l=V(()=>ne(n.curNode)),o=V(()=>{var i;return le((i=e.value)==null?void 0:i[0])}),s=V(()=>{var i;return le((i=e.value)==null?void 0:i[e.value.length-1])}),r=S("activateNode"),h=S("hoverStack"),d=V(()=>h.value[0]),c=i=>h.value.unshift(e.value[i]),y=i=>h.value.shift(),m=x(null),C=i=>{m.value=i,e.value[i]},w=()=>{m.value=null},_=i=>{m.value!==null&&i.preventDefault()},v=i=>{if(m.value===i||m.value===null)return;let p=Math.min(m.value,i),g=Math.max(m.value,i);const D=e.value[m.value];for(;p<g;)m.value<i?e.value[p]=e.value[++p]:e.value[g]=e.value[--g],p===g&&(e.value[p]=D);m.value=null},N=i=>{r.value=e.value[i]};return(i,p)=>(f(),b(I,null,[et,["switch"].includes(a.curNode.type)?(f(),k(te,{key:0,class:"on-bottom","end-line":!1,"add-type":"branch",onToAdd:p[0]||(p[0]=g=>t("addBranch"))})):P("",!0),$("div",{class:"branch-wrapper branch-wrapper-width",style:Z({"--var-col-count":u(l),"--var-first-branch-col-count":u(o),"--var-last-branch-col-count":u(s)})},[(f(!0),b(I,null,O(u(e),(g,D)=>(f(),k(be,{key:D,modelValue:u(e)[D],"onUpdate:modelValue":B=>u(e)[D]=B,class:q({"hover-branch":u(d)===u(e)[D]||u(r)===u(e)[D],"can-drop-branch":m.value!==null&&m.value!==D}),"branch-count":u(e).length,draggable:!0,onMouseenter:()=>c(D),onMouseleave:()=>y(),onRemoveBranch:()=>t("removeBranch",D),onDragstart:H(()=>C(D),["stop"]),onDragover:p[1]||(p[1]=B=>_(B)),onDropCapture:()=>v(D),onDragend:w,onClick:H(()=>N(D),["stop"])},null,8,["modelValue","onUpdate:modelValue","class","branch-count","onMouseenter","onMouseleave","onRemoveBranch","onDragstart","onDropCapture","onClick"]))),128))],4)],64))}},tt=$("div",{class:"c-circle c-if"}," if ",-1),nt={__name:"If",props:{modelValue:{type:Object,default:()=>({})},isPreview:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:t}){const n=a,e=V({get:()=>n.modelValue.branchList,set:s=>t("update:modelValue",{...n.modelValue,branchList:s})}),l=K(),o=s=>{var r;return s?(r=s==null?void 0:s.branchList)!=null&&r.length?s.branchList.reduce((h,d)=>h+Math.max(...d.map(c=>o(c)),1),0):1:0};return V(()=>o(n.modelValue)),(s,r)=>(f(),b(I,null,[$("div",W({class:"node-wrapper"},u(l)),[X(s.$slots,"default"),tt],16),a.isPreview?P("",!0):(f(),k(he,{key:0,modelValue:u(e),"onUpdate:modelValue":r[0]||(r[0]=h=>G(e)?e.value=h:null),"cur-node":a.modelValue},null,8,["modelValue","cur-node"]))],64))}};const ot=a=>(de("data-v-653f9187"),a=a(),ie(),a),at=ot(()=>$("div",{class:"c-circle c-switch"}," switch ",-1)),st={__name:"Switch",props:{modelValue:{type:Object,default:()=>({})},isPreview:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:t}){const n=a,e=V({get:()=>n.modelValue.branchList||[],set:r=>t("update:modelValue",{...n.modelValue,branchList:r})}),l=K(),o=()=>{e.value.push([])},s=r=>{e.value.splice(r,1)};return(r,h)=>(f(),b(I,null,[$("div",W({class:"node-wrapper"},u(l)),[X(r.$slots,"default",{},void 0,!0),at],16),a.isPreview?P("",!0):(f(),k(he,{key:0,modelValue:u(e),"onUpdate:modelValue":h[0]||(h[0]=d=>G(e)?e.value=d:null),"cur-node":a.modelValue,onAddBranch:o,onRemoveBranch:s},null,8,["modelValue","cur-node"]))],64))}},rt=M(st,[["__scopeId","data-v-653f9187"]]),lt={},ct={class:"node-wrapper"},ut=$("div",{class:"c-circle c-feat"}," Feat ",-1);function dt(a,t){return f(),b("div",ct,[X(a.$slots,"default"),ut])}const it=M(lt,[["render",dt]]),oe=[{type:"start",component:j(He),generateNode:()=>new L("start")},{type:"end",component:j(Xe),generateNode:()=>new L("end")},{type:"if",component:j(nt),generateNode:()=>new L("if")},{type:"switch",component:j(rt),generateNode:(a=[[],[]])=>new L("switch",{branchList:a})},{type:"feat",component:j(it),generateNode:()=>new L("feat")}],U=2,ce=(a,t=U)=>{const n=a==null?void 0:a.filter(Array.isArray);return n!=null&&n.length?t?n.length>=t?n.slice(0,t):n.slice().concat(new Array(t-n.length).fill(0).map(e=>[])):n.slice():new Array(t).fill(0).map(e=>[])},ue=()=>({code:""}),F=class{constructor(t,n){const{branchList:e=[],nodeInfo:l={}}=n||{};if(Object.defineProperty(this,"id",{configurable:!1,writable:!1,value:++F.id}),Object.defineProperty(this,"type",{configurable:!1,writable:!1,value:oe.some(o=>o.type===t)?t:"error"}),t==="if"){const o=ce(e);Object.defineProperty(this,"branchList",{configurable:!1,get(){return new Proxy(o,{get(s,r,h){return Reflect.get(s,r,h)},set(s,r,h,d){return["0","1"].includes(r)?Reflect.set(s,r,h,d):(console.error(`分支数量必须为${U}`),!1)}})}}),this.type==="if"&&(window.a=this.branchList)}if(t==="switch"){let o=ce(e,0);Object.defineProperty(this,"branchList",{configurable:!1,get:()=>o,set(s){if(s.length<U)throw new me(`分支数量至少为${U}`);o=s}})}l.nodeName=this.type,Object.defineProperty(this,"nodeInfo",{configurable:!1,get(){return new Proxy(l,{get(o,s,r){return Reflect.get(o,s,r)},set(o,s,r,h){return console.log("修改了",o,"的",s,"为",r),Reflect.set(o,s,r,h)}})}})}static copyBranchList(t){return(t==null?void 0:t.map(n=>(n==null?void 0:n.map(e=>e.copySelf()))||[]))||[]}copySelf(){return new F(this.type,{branchList:F.copyBranchList(this.branchList)})}static executeNode(t,n=[],e){e||(e=ue());const{type:l,branchList:o}=t;let s;["if","switch"].includes(l)&&(s=F.executeList(o[0],n));const r={start:()=>`start
      `,feat:()=>`feat
      `,end:()=>`end
      `,if:()=>`if(){
        ${s.context.code}
        }
      `,switch:()=>`switch(){
        ${s.context.code}
      }
      `};return e.code+=r[l](),{result:n,context:e}}static executeList(t,n=[]){const e=ue();return{result:t.reduce((o,s)=>F.executeNode(s,o,e).result,n),context:e}}toString(){return`{${Object.getOwnPropertyNames(this).reduce((t,n)=>{let e=`${t},${n}:`;return Array.isArray(this[n])?e+=`[${this[n].toString()}]`:typeof this[n]=="number"?e+=`${this[n].toString()}`:typeof this[n]=="string"?e+=`"${this[n].toString()}"`:e+=`{${this[n].toString()}}`,e},"").slice(1)}}`}};let L=F;re(L,"id",0);const pt={type:"error",component:j(me),generateNode:()=>new L("error")},ge=(a,t,n=null)=>{for(let e in a){e=e-0;const l=a[e];if(l===t)return{nodeList:a,parentNode:n,nodeIdx:e,branchIdx:null};for(let o in l.branchList||[]){o=o-0;const s=l.branchList[o];if(s===t)return{nodeList:s,parentNode:l,branchIdx:o,nodeIdx:null};const r=ge(s,t,l);if(r)return r}}return null},z=a=>{var e,l;const t=((e=window==null?void 0:window.__nodeList)==null?void 0:e.value)||[],n=((l=window==null?void 0:window.__activateNode)==null?void 0:l.value)||null;return ge(t||[],a||n)},vt=["draggable","onDragstart","onClick"],ft=$("div",{class:"line"},null,-1),_t={__name:"RenderItem",props:{modelValue:{type:Object,default:()=>({})},nodeList:{type:Array,default:()=>[]}},emits:["update:modelValue","update:nodeList","addNode","subNode","moveTo"],setup(a,{emit:t}){const n=a,e=V({get:()=>n.modelValue,set:g=>t("update:modelValue",g)}),l=V({get:()=>n.nodeList,set:g=>t("update:nodeList",g)}),o=V(()=>(oe.find(g=>g.type===e.value.type)||pt).component),s=S("hoverStack"),r=S("dragConf"),h=S("activateNode"),d=V(()=>s.value[0]),c=()=>s.value.unshift(e.value),y=()=>s.value.shift(),m=()=>{r.value.customDragData={node:e.value,curBranch:l.value,target:null};const g=[],D=(B,ye)=>{var ae;!ye&&g.push(B),(ae=B==null?void 0:B.branchList)!=null&&ae.length&&B.branchList.forEach(se=>{g.push(se),se.forEach(Ne=>D(Ne))})};D(e.value,!0),r.value.dragFlag=!0,r.value.banDropNodeList=g},C=()=>{r.value.dragFlag=!1,r.value.banDropNodeList=[]},w=Q(),_=()=>{r.value.customDragData&&(r.value.banDropNodeList.includes(e)||ve(r.value.customDragData.target)===w&&(t("moveTo",r.value.customDragData.node,r.value.customDragData.curBranch),r.value.customDragData=null,s.value=[]))},v=()=>{r.value.customDragData&&(r.value.customDragData.target=w)},N=()=>{r.value.customDragData&&(r.value.customDragData.target=null)},i=g=>{r.value.dragFlag&&!r.value.banDropNodeList.includes(e.value)&&g.preventDefault()},p=()=>{h.value=e.value};return(g,D)=>(f(),b(I,null,[$("div",{draggable:!["start","end"].includes(u(e).type),class:q(["node-box",{"hover-node":u(d)===u(e)||u(h)===u(e),"no-branch-box":!["if","switch"].includes(u(e).type)}]),onMouseenter:c,onMouseleave:y,onDragstart:H(m,["stop"]),onDragend:C,onClick:H(p,["stop"])},[(f(),k(pe(u(o)),{modelValue:u(e),"onUpdate:modelValue":D[1]||(D[1]=B=>G(e)?e.value=B:null)},{default:T(()=>[A(_e,{onToSub:D[0]||(D[0]=B=>t("subNode"))})]),_:1},8,["modelValue"]))],42,vt),u(e).type!=="end"?(f(),b(I,{key:0},[ft,A(te,{class:q({canDropFlag:u(r).dragFlag&&!u(r).banDropNodeList.includes(u(e))}),onToAdd:D[2]||(D[2]=B=>t("addNode",B)),onDragover:i,onDrop:_,onDragenter:v,onDragleave:N},null,8,["class"])],64)):P("",!0)],64))}},mt=$("div",{class:"line"},null,-1),be={__name:"RenderList",props:{modelValue:{type:Array,default:()=>[]},startLine:{type:Boolean,default:!0},branchCount:{type:Number,default:1}},emits:["update:modelValue","removeBranch"],setup(a,{emit:t}){const n=a,e=K(),l=V({get:()=>n.modelValue,set:_=>t("update:modelValue",_)}),o=S("dragConf"),s=S("hoverStack"),r=(_,v)=>{const N=v.generateNode();l.value.splice(_+1,0,N)},h=(_,v,N)=>{const i=v.findIndex(p=>p===_);if(v===l.value){if(i===N+1||i===N)return;i>N?(v.splice(i,1),v.splice(N+1,0,_)):(v.splice(N+1,0,_),v.splice(i,1))}else v.splice(i,1),l.value.splice(N+1,0,_)},d=_=>{l.value.splice(_,1)},c=Q(),y=()=>{o.value.customDragData&&(o.value.banDropNodeList.includes(l)||ve(o.value.customDragData.target)===c&&(h(o.value.customDragData.node,o.value.customDragData.curBranch,-1),s.value=[],o.value.customDragData=null))},m=()=>{o.value.customDragData&&(o.value.customDragData.target=c)},C=()=>{o.value.customDragData&&(o.value.customDragData.target=null)},w=_=>{o.value.dragFlag&&!o.value.banDropNodeList.includes(l.value)&&_.preventDefault()};return(_,v)=>(f(),b("div",W({class:"render-list-wrapper"},u(e)),[a.startLine?(f(),b(I,{key:0},[a.branchCount>2?(f(),k(_e,{key:0,onClick:v[0]||(v[0]=N=>t("removeBranch"))})):P("",!0),mt,A(te,{class:q({canDropFlag:u(o).dragFlag&&!u(o).banDropNodeList.includes(u(l))}),droppable:u(o).dragFlag&&!u(o).banDropNodeList.includes(u(l)),onToAdd:v[1]||(v[1]=N=>r(-1,N)),onDragover:w,onDrop:y,onDragenter:m,onDragleave:C},null,8,["class","droppable"])],64)):P("",!0),(f(!0),b(I,null,O(u(l),(N,i)=>(f(),k(_t,{key:N.id,modelValue:u(l)[i],"onUpdate:modelValue":p=>u(l)[i]=p,"node-list":u(l),"onUpdate:nodeList":v[2]||(v[2]=p=>G(l)?l.value=p:null),onAddNode:p=>r(i,p),onSubNode:()=>d(i),onMoveTo:(p,g)=>h(p,g,i)},null,8,["modelValue","onUpdate:modelValue","node-list","onAddNode","onSubNode","onMoveTo"]))),128))],16))}};const ht={class:"select-node-wrapper"},gt={__name:"AddNodeDialog",setup(a,{expose:t}){const n=x({x:1,y:1}),e=x(!1);let l,o;const s=()=>{e.value=!1,l=null,o=null},r=(c,y,m)=>{if(o===m)return s();o=m,l=y,n.value=c,e.value=!0},h=c=>{l==null||l(c),s()},d=x(oe.filter(c=>!["start","end"].includes(c.type)));return t({show:r,close:s}),(c,y)=>ee((f(),b("div",{class:"add-node-dialog",style:Z({"--var-dialog-left":`${n.value.x}px`,"--var-dialog-top":`${n.value.y}px`,"--var-dialog-size":e.value?"300px":"0"})},[$("div",ht,[(f(!0),b(I,null,O(d.value,m=>(f(),k(pe(m.component),{key:m.type,"is-preview":!0,onClick:()=>h(m)},null,8,["onClick"]))),128))])],4)),[[u(fe),s]])}},bt=M(gt,[["__scopeId","data-v-7f77c4dd"]]),yt={__name:"BranchInfo",setup(a){return(t,n)=>(f(),b("div",null,E(u(z)()),1))}};const Nt={class:"tab-pane-content"},wt={class:"module-name"},Dt={__name:"NodeInfo",setup(a){const t=S("activateNode"),n=V({get:()=>{var d;return((d=t.value)==null?void 0:d.nodeInfo)||{}},set:d=>{t.value.nodeInfo=d}}),e=d=>{const c=(m,C,w,_)=>({label:m,field:C,type:w,component:_}),{type:y}=d;switch(y){case"if":return{base:[{moduleName:"基本信息",attrs:[c("节点名称","nodeName","input"),c("判断条件","condition","input"),c("a","a","input"),c("b","b","input"),c("b.b","b.b.c","input"),c("a.b","a.b","input")]},{moduleName:"输入参数",attrs:[]},{moduleName:"输出参数",attrs:[]}],other:[{moduleName:"",attrs:[{label:"",type:"input"}]}]};default:return{base:[],other:[]}}},l=V(()=>{const{base:d,other:c}=e(t.value);return console.log(d,c),[{label:"基础属性",modules:d},{label:"其他属性",modules:c}]}),o=x("基础属性"),s=V({get(){return d=>{const c=(d==null?void 0:d.split("."))||[];return c.reduce((y,m)=>(y==null?void 0:y[m])||void 0,c.length?n.value:void 0)}}}),r=d=>typeof d=="object"&&d!==null,h=(d,c)=>{const y=(c==null?void 0:c.split("."))||[];if(y.length)if(y.length===1)n.value[y[0]]=d;else{const m=y.pop();try{let C="nodeInfo";const w=y.reduce((_,v)=>(C+=`.${v}`,r(_[v])||(console.warn(`${C}不是一个对象，已强制转化为对象`),_[v]={}),_[v]),y.length?n.value:void 0);w[m]=d}catch(C){console.error(`nodeInfo数据异常，无法读取${c}字段`),console.error(C)}}};return(d,c)=>{const y=Ae,m=Be,C=ke,w=xe,_=Ie;return f(),k(_,{modelValue:o.value,"onUpdate:modelValue":c[0]||(c[0]=v=>o.value=v),stretch:!0},{default:T(()=>[(f(!0),b(I,null,O(u(l),v=>(f(),k(w,{key:v.label,label:v.label,name:v.label},{default:T(()=>[A(C,{model:u(n)},{default:T(()=>[R(E(u(n))+" ",1),$("div",Nt,[(f(!0),b(I,null,O(v.modules,(N,i)=>(f(),b("div",{key:i,class:"module-content"},[$("div",wt,E(N.moduleName),1),(f(!0),b(I,null,O(N.attrs,(p,g)=>(f(),b("div",{key:g},[A(m,{label:p.label,rules:p.required&&[{required:!0,message:""}]},{default:T(()=>[A(y,{disabled:p.disabled,"model-value":u(s)(p.field),onInput:D=>h(D,p.field)},null,8,["disabled","model-value","onInput"])]),_:2},1032,["label","rules"])]))),128))]))),128))])]),_:2},1032,["model"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])}}},$t=M(Dt,[["__scopeId","data-v-ca4e7108"]]);const Lt={__name:"index",setup(a){const t="350px",n=S("activateNode"),e=x(null),l=x(!1);Le(()=>n.value,s=>{s&&(e.value=s,l.value=!0)});const o=()=>{l.value=!1,e.value=null};return(s,r)=>ee((f(),b("div",{style:Z({"--var-width":t,"--var-right":l.value?0:`-${t}`,"--var-opacity":Number(l.value)}),class:"custom-drawer"},[e.value?(f(),b(I,{key:0},[Array.isArray(e.value)?(f(),k(yt,{key:0})):(f(),k($t,{key:1}))],64)):P("",!0)],4)),[[u(fe),o]])}},Ct=M(Lt,[["__scopeId","data-v-740b89c5"]]);const J=a=>(de("data-v-5ea59a69"),a=a(),ie(),a),Vt={style:{display:"inline-block","vertical-align":"top"}},xt=J(()=>$("br",null,null,-1)),It=J(()=>$("br",null,null,-1)),Bt=J(()=>$("br",null,null,-1)),kt=J(()=>$("br",null,null,-1)),At={__name:"Main",setup(a){const t=x([new L("start"),new L("feat"),new L("if",{branchList:[[new L("feat")]]}),new L("switch",{branchList:[[new L("feat")],[new L("feat")],[new L("feat")]]}),new L("end")]);window.__nodeList=t;const n=x(null);Y("addNodeDialogRef",n);const e=x([]);Y("hoverStack",e);const l=x({banDropNodeList:[],dragFlag:!1,customDragData:null});Y("dragConf",l);const o=x(null);Y("activateNode",o),window.__activateNode=o,Ce(()=>{window.__activateNode=void 0,window.__nodeList=void 0});const s=x(null),r=()=>{var p;const w=o.value;if(!w||["start","end"].includes(w.type))return;const{parentNode:_,branchIdx:v,nodeList:N,nodeIdx:i}=z();if(Array.isArray(w)){if(((p=_.branchList)==null?void 0:p.length)<=U)throw new Error(`分支数量至少为${U},剪切失败！`);(_.branchList||[]).splice(v,1)}else N.splice(i,1);s.value={type:"shear",data:w}},h=()=>{const w=o.value;w&&(["start","end"].includes(w.type)||(s.value={type:"copy",data:w}))},d=w=>{if(!s.value)return;const{type:_,data:v}=s.value;if(!v||["end"].includes(o.value.type))return;const N={copyNode:()=>{if(!o.value||Array.isArray(o.value))return;const{nodeList:p,nodeIdx:g}=z();console.log({branchNodeList:p,nodeIdx:g}),p.splice(g+1,0,v.copySelf())},shearNode:()=>{if(!o.value||Array.isArray(o.value))return;const{nodeList:p,nodeIdx:g}=z();p.splice(g+1,0,v),s.value=null},copyBranch:()=>{var p;((p=o.value)==null?void 0:p.type)==="switch"&&o.value.branchList.push(v.map(g=>g.copySelf()))},shearBranch:()=>{var p;((p=o.value)==null?void 0:p.type)==="switch"&&(o.value.branchList.push(v),s.value=null)}},i=_+(Array.isArray(v)?"Branch":"Node");N[i]()},c=x(!0),y=()=>{c.value=!c.value},m=x(""),C=()=>{console.log("BaseNode.executeList(nodeList.value, [])",L.executeList(t.value,[]));const w=L.executeList(t.value,[]);m.value=w.context.code};return(w,_)=>{var i;const v=$e,N=Ve("mousetrap");return f(),b(I,null,[$("div",{id:"canvas-main",class:"canvas-main",onClickCapture:_[1]||(_[1]=p=>o.value=null)},[A(v,{onClick:y},{default:T(()=>[R(" 快捷建："+E(c.value?"开启":"关闭"),1)]),_:1}),A(v,{onClick:C},{default:T(()=>[R(" 执行 ")]),_:1}),A(be,{modelValue:t.value,"onUpdate:modelValue":_[0]||(_[0]=p=>t.value=p),"start-line":!1},null,8,["modelValue"]),$("div",Vt,[R(" shearPlate: "+E(s.value)+" ",1),xt,R(" ParentNode: "+E(((i=u(z)())==null?void 0:i.parentNode)||"null")+" ",1),It,R(" activateNode: "+E(o.value)+" ",1),Bt,$("pre",null,[R("      code"),kt,R(`
      `+E(m.value)+`
    `,1)])])],32),A(bt,{ref_key:"addNodeDialogRef",ref:n},null,512),A(u(Ct)),c.value?ee((f(),b("div",{key:0,"onMod+c":_[2]||(_[2]=()=>h()),"onMod+x":_[3]||(_[3]=()=>r()),"onMod+v":d},null,544)),[[N,["mod+c","mod+v","mod+x"]]]):P("",!0)],64)}}},St=M(At,[["__scopeId","data-v-5ea59a69"]]),Zt={__name:"index",setup(a){return(t,n)=>(f(),k(St))}};export{Zt as default};
