import{P as z,d as N,r as y,Q as F,k as u,o as t,c as o,N as O,O as f,F as h,R as b,C as I,w as _,a as w,b as m,S as H,U as L,E as G,V as Q,W,X,H as $,I as Y,Y as Z,Z as B,G as j,$ as q,a0 as J}from"./index-274faae7.js";import"./el-input-4516e7eb.js";import"./el-scrollbar-ce87f6cc.js";import{E as R,a as T}from"./el-select-571b198e.js";import{E as K}from"./el-button-44cd7fe3.js";import{E as M}from"./index-dbd292ce.js";import{C as ee}from"./index-a170027c.js";import"./event-9519ab40.js";import"./get-e7313515.js";import"./strings-d6676f3c.js";import"./index-197c75cb.js";import"./index-b6b8256e.js";import"./scroll-1b1472d8.js";import"./validator-095d3edc.js";const le=i=>(q("data-v-7bc8cf1f"),i=i(),J(),i),te={key:0,class:"placeholder"},ae={key:1,class:"show-value"},oe={key:0,class:"el-tag-wrapper"},se={key:1},ne=le(()=>O("div",{class:"mock-input"},null,-1)),ue={__name:"index",props:{modelValue:{type:[String,Array],default:""},placeholder:{type:String,default:"请选择"},option:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(i,{emit:C}){const l=i,s=((a=[])=>{const e={...Z()};return a.forEach(v=>{typeof e[v]=="boolean"||e[v]===void 0||(e[v]=!0)}),e})(["multiple","clearable","filterable"]);console.log("attr",s);const r=N({get:()=>l.modelValue,set:a=>{console.log("更新了",a),C("update:modelValue",a)}}),V=y(null),d=y(!1),E=()=>{d.value=!1},S=async()=>{d.value=!0,await B(),V.value.visible=!0},g=N(()=>s.multiple?l.modelValue&&l.modelValue.length>0:l.modelValue||l.modelValue===0),c=N(()=>{const a=n=>{var e;return(e=l.option.find(v=>v.value===n))==null?void 0:e.label};return s.multiple?Array.isArray(l.modelValue)?l.modelValue.map(n=>n===""?"":a(n)):l.modelValue?[a(l.modelValue)]:[]:a(l.modelValue)}),x=a=>{s.multiple?r.value.splice(a,1):r.value=""},A=()=>{r.value=s.multiple?[]:void 0};return(a,n)=>{const e=M,v=j,D=R,P=T;return F((t(),o("div",{class:"v-select2-wrapper",style:Y({"--var-padding":u(s).multiple?"0px 11px 0px 6px":"1px 11px"})},[F(O("div",{class:G(["v-select2-wrapper_inner",{"is-active":d.value}]),onClick:S},[u(g)?(t(),o("div",ae,[u(s).multiple?(t(),o("span",oe,[(t(!0),o(h,null,b(u(c),(p,U)=>(t(),I(e,{key:`${p}-${U}`,type:"info",closable:"",onClose:()=>x(U)},{default:_(()=>[w(f(p),1)]),_:2},1032,["onClose"]))),128))])):(t(),o("span",se,f(u(c)),1)),ne])):(t(),o("span",te,f(i.placeholder),1)),m(v,{class:"select-icon"},{default:_(()=>[m(u(H),{class:"item-hover",onClick:A}),m(u(L),{class:"not-item-hover"})]),_:1})],2),[[Q,!d.value]]),d.value?(t(),I(P,W({key:0},u(s),{ref_key:"selectRef",ref:V,modelValue:u(r),"onUpdate:modelValue":n[0]||(n[0]=p=>X(r)?r.value=p:null),teleported:!1}),{default:_(()=>[(t(!0),o(h,null,b(i.option,p=>(t(),I(D,{key:p.value,value:p.value},{default:_(()=>[w(f(p.label),1)]),_:2},1032,["value"]))),128))]),_:1},16,["modelValue"])):$("",!0)],4)),[[u(ee),E]])}}},re=z(ue,[["__scopeId","data-v-7bc8cf1f"]]),ce={key:0},ie={key:1},xe={__name:"index",setup(i){const C=[{label:"空串",value:""},{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"}],l=10,k=y(""),s=y(!0),r=y(!1),V=y(!1),d=(g,c)=>async()=>{console.time("销毁"),c.value=!1,r.value=!0,await B(),console.timeEnd("销毁"),console.time("渲染"),g.value=!0,r.value=!1,await B(),console.timeEnd("渲染")},E=d(s,V),S=d(V,s);return(g,c)=>{const x=K,A=R,a=T;return t(),o("div",null,[O("div",null,[m(x,{onClick:u(S)},{default:_(()=>[w(" 测试"+f(l)+"个普通下拉框 ")]),_:1},8,["onClick"]),m(x,{onClick:u(E)},{default:_(()=>[w(" 测试"+f(l)+"个虚拟下拉框 ")]),_:1},8,["onClick"])]),!r.value&&V.value?(t(),o("div",ce,[(t(),o(h,null,b(l,n=>m(a,{key:n,modelValue:k.value,"onUpdate:modelValue":c[0]||(c[0]=e=>k.value=e),multiple:"",clearable:"",filterable:""},{default:_(()=>[(t(),o(h,null,b(C,e=>m(A,{key:e.value,value:e.value},{default:_(()=>[w(f(e.label),1)]),_:2},1032,["value"])),64))]),_:2},1032,["modelValue"])),64))])):$("",!0),!r.value&&s.value?(t(),o("div",ie,[(t(),o(h,null,b(l,n=>m(re,{key:n,modelValue:k.value,"onUpdate:modelValue":c[1]||(c[1]=e=>k.value=e),option:C,multiple:"",clearable:"",filterable:""},null,8,["modelValue"])),64))])):$("",!0)])}}};export{xe as default};
