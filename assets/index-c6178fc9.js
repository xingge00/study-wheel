import{_ as v,a2 as b,t as I,o as t,c as l,L as p,M as A,S as R,i as u,G as x,F as m,v as g,b as V,Y as N,C as w,H as B,am as P,an as T,ar as h,R as U,D as C,r as $,P as E,a3 as M,I as j}from"./index-2da1e170.js";const Y=["onClick"],F={key:0,class:"line"},O={__name:"AddNodeBtn",props:{endLine:{type:Boolean,default:!0},addType:{type:String,default:"node"}},emits:["toAdd"],setup(o,{emit:s}){const r=o,e=b(),i=I("addNodeDialogRef"),a=n=>{if(n.id==="canvas-main"||!n)return{x:0,y:0};const c=a(n.offsetParent);return{x:c.x+n.offsetLeft,y:c.y+n.offsetTop}},d=n=>{s("toAdd",n)},_=n=>{if(r.addType==="branch")return s("toAdd");const{x:c,y:f}=a(n.target);i.value.show({x:n.offsetX+c,y:n.offsetY+f},d)};return(n,c)=>(t(),l(m,null,[p("div",A({class:"add-node"},u(e),{onClick:R(_,["stop"])})," + ",16,Y),o.endLine?(t(),l("div",F)):x("",!0)],64))}},k=v(O,[["__scopeId","data-v-4349605a"]]),X={},z={class:"node-wrapper"},G=p("div",{class:"c-circle c-start"}," start ",-1),H=[G];function q(o,s){return t(),l("div",z,H)}const J=v(X,[["render",q]]),K={},Q={class:"node-wrapper"},W=p("div",{class:"c-circle c-if"}," if ",-1),Z=[W];function ee(o,s){return t(),l("div",Q,Z)}const te=v(K,[["render",ee]]);const D=o=>(P("data-v-12a09001"),o=o(),T(),o),oe=D(()=>p("div",{class:"c-circle c-switch"}," switch ",-1)),ne=[oe],se=D(()=>p("div",{class:"line"},null,-1)),ae={__name:"Switch",props:{modelValue:{type:Object,default:()=>({})},isPreview:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(o,{emit:s}){const r=o,e=g({get:()=>r.modelValue.branch,set:d=>s("update:modelValue",{...r.modelValue,branch:d})}),i=b(),a=()=>{e.value.push([])};return(d,_)=>{var n;return t(),l(m,null,[p("div",A({class:"node-wrapper"},u(i)),ne,16),o.isPreview?x("",!0):(t(),l(m,{key:0},[se,V(k,{class:"on-bottom","end-line":!1,"add-type":"branch",onToAdd:a}),p("div",{class:"branch-wrapper branch-wrapper-width",style:B({"--var-branch-count":((n=u(e))==null?void 0:n.length)||1})},[(t(!0),l(m,null,N(u(e),(c,f)=>(t(),w(S,{key:f,modelValue:u(e)[f],"onUpdate:modelValue":y=>u(e)[f]=y},null,8,["modelValue","onUpdate:modelValue"]))),128))],4)],64))],64)}}},de=v(ae,[["__scopeId","data-v-12a09001"]]),ce={},le={class:"node-wrapper"},re=p("div",{class:"c-circle c-end"}," end ",-1),ie=[re];function _e(o,s){return t(),l("div",le,ie)}const ue=v(ce,[["render",_e]]),pe={},me={class:"node-wrapper"},fe=p("div",{class:"c-circle c-other"}," Error ",-1),ve=[fe];function ye(o,s){return t(),l("div",me,ve)}const he=v(pe,[["render",ye]]),$e={type:"error",component:h(he)},L=[{type:"start",component:h(J)},{type:"if",component:h(te)},{type:"switch",component:h(de)},{type:"end",component:h(ue)}],Ve=p("div",{class:"line"},null,-1),we={__name:"RenderItem",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","addNode"],setup(o,{emit:s}){const r=o,e=g({get:()=>r.modelValue,set:a=>s("update:modelValue",a)}),i=g(()=>(L.find(a=>a.type===e.value.type)||$e).component);return(a,d)=>(t(),l(m,null,[(t(),w(C(u(i)),{modelValue:u(e),"onUpdate:modelValue":d[0]||(d[0]=_=>U(e)?e.value=_:null)},null,8,["modelValue"])),u(e).type!=="end"?(t(),l(m,{key:0},[Ve,V(k,{onToAdd:d[1]||(d[1]=_=>s("addNode",_))})],64)):x("",!0)],64))}},ge={class:"render-list-wrapper"},xe=p("div",{class:"line"},null,-1),S={__name:"RenderList",props:{modelValue:{type:Array,default:()=>[]},startLine:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(o,{emit:s}){const r=o,e=g({get:()=>r.modelValue,set:a=>s("update:modelValue",a)}),i=(a,d)=>{const _={id:Date.now(),type:d.type,branch:[]};e.value.splice(a+1,0,_)};return(a,d)=>(t(),l("div",ge,[o.startLine?(t(),l(m,{key:0},[xe,V(k,{onToAdd:d[0]||(d[0]=_=>i(-1,_))})],64)):x("",!0),(t(!0),l(m,null,N(u(e),(_,n)=>(t(),w(we,{key:_.id,modelValue:u(e)[n],"onUpdate:modelValue":c=>u(e)[n]=c,onAddNode:c=>i(n,c)},null,8,["modelValue","onUpdate:modelValue","onAddNode"]))),128))]))}};const Ne={class:"select-node-wrapper"},ke={__name:"AddNodeDialog",setup(o,{expose:s}){const r=$({x:1,y:1}),e=$(!1);let i;const a=(c,f)=>{i=f,r.value=c,e.value=!0},d=()=>{e.value=!1},_=c=>{d(),i(c)},n=$(L.filter(c=>!["start","end"].includes(c.type)));return s({show:a,close:d}),(c,f)=>E((t(),l("div",{class:"add-node-dialog",style:B({"--var-dialog-left":`${r.value.x}px`,"--var-dialog-top":`${r.value.y}px`})},[p("div",Ne,[(t(!0),l(m,null,N(n.value,y=>(t(),w(C(y.component),{key:y.type,"is-preview":!0,onClick:()=>_(y)},null,8,["onClick"]))),128))])],4)),[[M,e.value]])}},be=v(ke,[["__scopeId","data-v-e959d92b"]]);const Ae={id:"canvas-main",class:"canvas-main"},Be={__name:"Main",setup(o){const s=$([{id:"0",type:"start"},{id:"1",type:"if"},{id:"2",type:"switch",branch:[[{id:"2-1-2",type:"aaa"}],[{id:"2-2-1",type:"aaa"}],[]]},{id:"4",type:"aaa"},{id:"999",type:"end"}]),r=$(null);return j("addNodeDialogRef",r),(e,i)=>(t(),l("div",Ae,[V(S,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=a=>s.value=a),"start-line":!1},null,8,["modelValue"]),V(be,{ref_key:"addNodeDialogRef",ref:r},null,512)]))}},Ce=v(Be,[["__scopeId","data-v-02a4e1f3"]]),Le={__name:"index",setup(o){return(s,r)=>(t(),w(Ce))}};export{Le as default};
