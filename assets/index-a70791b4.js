import{a as Ne,i as T,c as Ee,h as X,_ as ke,w as Se}from"./base-083a4d6e.js";import{E as xe}from"./el-input-fb643135.js";import"./el-scrollbar-ffcdc781.js";import{E as se,a as oe}from"./el-select-b9afbfb2.js";import"./el-popper-b588616c.js";import{u as De,a as Ce,b as Ae,c as Te,E as $e}from"./el-button-9ed51a92.js";import{E as Me,a as Oe}from"./el-radio-button-b52bbe4e.js";import{O as de,A as he,r as A,J as Pe,v as F,d as q,k as Ue,P as Be,o as i,c as f,Q as ce,i as u,E as ie,R as Z,b as x,w as C,C as E,G as R,S as ee,l as Fe,_ as ue,L as h,F as S,U as $,V as G,W as Le,M as ne,X as je,Y as Ke,Z as ze,$ as Re,a0 as me,a as P}from"./index-e8c6a594.js";import{n as Ge}from"./nanoid-1c86ba39.js";import{d as Ye,m as We,E as pe,e as He,p as Je}from"./index-e1070bac.js";import{C as be,I as te,U as Y,d as fe}from"./event-e06a23af.js";import{i as H}from"./isNil-c75b1b34.js";import{u as Qe}from"./index-880dc3ed.js";import"./index-26922a77.js";import"./typescript-defaf979.js";import"./get-e7313515.js";import"./index-e8a169f3.js";import"./index-f5012387.js";import"./strings-743a323d.js";import"./scroll-88fab043.js";import"./aria-60e0cdc6.js";import"./validator-cdc3f740.js";import"./index-77d8bc5e.js";import"./focus-trap-78de6ee3.js";const Xe=100,Ze=600,ve={beforeMount(t,s){const a=s.value,{interval:n=Xe,delay:o=Ze}=de(a)?{}:a;let r,d;const c=()=>de(a)?a():a.handler(),m=()=>{d&&(clearTimeout(d),d=void 0),r&&(clearInterval(r),r=void 0)};t.addEventListener("mousedown",_=>{_.button===0&&(m(),c(),document.addEventListener("mouseup",()=>m(),{once:!0}),d=setTimeout(()=>{r=setInterval(()=>{c()},n)},o))})}},qe=Ne({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:De,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:t=>t===null||T(t)||["min","max"].includes(t),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:t=>t>=0&&t===Number.parseInt(`${t}`,10)},validateEvent:{type:Boolean,default:!0}}),et={[be]:(t,s)=>s!==t,blur:t=>t instanceof FocusEvent,focus:t=>t instanceof FocusEvent,[te]:t=>T(t)||H(t),[Y]:t=>T(t)||H(t)},tt=["aria-label","onKeydown"],lt=["aria-label","onKeydown"],nt=he({name:"ElInputNumber"}),at=he({...nt,props:qe,emits:et,setup(t,{expose:s,emit:a}){const n=t,{t:o}=Qe(),r=Ee("input-number"),d=A(),c=Pe({currentValue:n.modelValue,userInput:null}),{formItem:m}=Ce(),_=F(()=>T(n.modelValue)&&n.modelValue<=n.min),M=F(()=>T(n.modelValue)&&n.modelValue>=n.max),L=F(()=>{const e=U(n.step);return X(n.precision)?Math.max(U(n.modelValue),e):(e>n.precision,n.precision)}),j=F(()=>n.controls&&n.controlsPosition==="right"),D=Ae(),g=Te(),w=F(()=>{if(c.userInput!==null)return c.userInput;let e=c.currentValue;if(H(e))return"";if(T(e)){if(Number.isNaN(e))return"";X(n.precision)||(e=e.toFixed(n.precision))}return e}),N=(e,l)=>{if(X(l)&&(l=L.value),l===0)return Math.round(e);let p=String(e);const I=p.indexOf(".");if(I===-1||!p.replace(".","").split("")[I+l])return e;const J=p.length;return p.charAt(J-1)==="5"&&(p=`${p.slice(0,Math.max(0,J-1))}6`),Number.parseFloat(Number(p).toFixed(l))},U=e=>{if(H(e))return 0;const l=e.toString(),p=l.indexOf(".");let I=0;return p!==-1&&(I=l.length-p-1),I},B=(e,l=1)=>T(e)?N(e+n.step*l):c.currentValue,K=()=>{if(n.readonly||g.value||M.value)return;const e=Number(w.value)||0,l=B(e);v(l),a(te,c.currentValue)},z=()=>{if(n.readonly||g.value||_.value)return;const e=Number(w.value)||0,l=B(e,-1);v(l),a(te,c.currentValue)},b=(e,l)=>{const{max:p,min:I,step:V,precision:O,stepStrictly:J,valueOnClear:Q}=n;let k=Number(e);if(H(e)||Number.isNaN(k))return null;if(e===""){if(Q===null)return null;k=Fe(Q)?{min:I,max:p}[Q]:Q}return J&&(k=N(Math.round(k/V)*V,O)),X(O)||(k=N(k,O)),(k>p||k<I)&&(k=k>p?p:I,l&&a(Y,k)),k},v=(e,l=!0)=>{var p;const I=c.currentValue,V=b(e);if(I!==V){if(!l){a(Y,V);return}c.userInput=null,a(Y,V),a(be,V,I),n.validateEvent&&((p=m==null?void 0:m.validate)==null||p.call(m,"change").catch(O=>fe())),c.currentValue=V}},y=e=>{c.userInput=e;const l=e===""?null:Number(e);a(te,l),v(l,!1)},ye=e=>{const l=e!==""?Number(e):"";(T(l)&&!Number.isNaN(l)||e==="")&&v(l),c.userInput=null},Ve=()=>{var e,l;(l=(e=d.value)==null?void 0:e.focus)==null||l.call(e)},ge=()=>{var e,l;(l=(e=d.value)==null?void 0:e.blur)==null||l.call(e)},we=e=>{a("focus",e)},Ie=e=>{var l;a("blur",e),n.validateEvent&&((l=m==null?void 0:m.validate)==null||l.call(m,"blur").catch(p=>fe()))};return q(()=>n.modelValue,e=>{const l=b(c.userInput),p=b(e,!0);!T(l)&&(!l||l!==p)&&(c.currentValue=p,c.userInput=null)},{immediate:!0}),Ue(()=>{var e;const{min:l,max:p,modelValue:I}=n,V=(e=d.value)==null?void 0:e.input;if(V.setAttribute("role","spinbutton"),Number.isFinite(p)?V.setAttribute("aria-valuemax",String(p)):V.removeAttribute("aria-valuemax"),Number.isFinite(l)?V.setAttribute("aria-valuemin",String(l)):V.removeAttribute("aria-valuemin"),V.setAttribute("aria-valuenow",String(c.currentValue)),V.setAttribute("aria-disabled",String(g.value)),!T(I)&&I!=null){let O=Number(I);Number.isNaN(O)&&(O=null),a(Y,O)}}),Be(()=>{var e;const l=(e=d.value)==null?void 0:e.input;l==null||l.setAttribute("aria-valuenow",`${c.currentValue}`)}),s({focus:Ve,blur:ge}),(e,l)=>(i(),f("div",{class:ie([u(r).b(),u(r).m(u(D)),u(r).is("disabled",u(g)),u(r).is("without-controls",!e.controls),u(r).is("controls-right",u(j))]),onDragstart:l[0]||(l[0]=ee(()=>{},["prevent"]))},[e.controls?ce((i(),f("span",{key:0,role:"button","aria-label":u(o)("el.inputNumber.decrease"),class:ie([u(r).e("decrease"),u(r).is("disabled",u(_))]),onKeydown:Z(z,["enter"])},[x(u(pe),null,{default:C(()=>[u(j)?(i(),E(u(Ye),{key:0})):(i(),E(u(We),{key:1}))]),_:1})],42,tt)),[[u(ve),z]]):R("v-if",!0),e.controls?ce((i(),f("span",{key:1,role:"button","aria-label":u(o)("el.inputNumber.increase"),class:ie([u(r).e("increase"),u(r).is("disabled",u(M))]),onKeydown:Z(K,["enter"])},[x(u(pe),null,{default:C(()=>[u(j)?(i(),E(u(He),{key:0})):(i(),E(u(Je),{key:1}))]),_:1})],42,lt)),[[u(ve),K]]):R("v-if",!0),x(u(xe),{id:e.id,ref_key:"input",ref:d,type:"number",step:e.step,"model-value":u(w),placeholder:e.placeholder,readonly:e.readonly,disabled:u(g),size:u(D),max:e.max,min:e.min,name:e.name,label:e.label,"validate-event":!1,onKeydown:[Z(ee(K,["prevent"]),["up"]),Z(ee(z,["prevent"]),["down"])],onBlur:Ie,onFocus:we,onInput:y,onChange:ye},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var st=ke(at,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const ot=Se(st);const ut={name:"StyleSelector",props:{selectedData:{default:""}},emits:["toggleMenu","deleteItem"],computed:{isMultiple(){return this.$attrs.multiple},showPlaceholder(){return this.isMultiple?this.selectedData.length?"":this.$attrs.placeholder:this.selectedData?"":this.$attrs.placeholder}}},it={class:"select-trigger el-tooltip__trigger el-tooltip__trigger"},rt={key:0,class:"el-select__tags",style:{width:"100%","max-width":"182px"}},dt={class:"el-select-tags-wrapper has-prefix"},ct={class:"el-tag__content"},mt={class:"el-select__tags-text",style:{"max-width":"139px"}},pt=["onClick"],ft=h("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[h("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"})],-1),vt=[ft],_t={class:"el-input el-input--suffix"},ht={class:"el-input__wrapper"},bt=["value","placeholder"],yt=Le('<span class="el-input__suffix"><span class="el-input__suffix-inner"><i class="el-icon el-select__caret el-select__icon"><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"></path></svg></i></span></span>',1);function Vt(t,s,a,n,o,r){return i(),f("div",{class:"el-select",style:{height:"32px"},onClick:s[0]||(s[0]=d=>t.$emit("toggleMenu"))},[h("div",it,[r.isMultiple?(i(),f("div",rt,[h("span",dt,[(i(!0),f(S,null,$(a.selectedData,d=>(i(),f("span",{key:d.key,class:"el-tag is-closable el-tag--info el-tag--default el-tag--light"},[h("span",ct,[h("span",mt,G(d[t.$attrs["label-key"]]),1)]),h("i",{class:"el-icon el-tag__close",onClick:c=>t.$emit("deleteItem",d)},vt,8,pt)]))),128))])])):R("",!0),h("div",_t,[h("div",ht,[h("input",{class:"el-input__inner",type:"text",readonly:"",autocomplete:"off",tabindex:"0",value:r.isMultiple?"":a.selectedData[t.$attrs["label-key"]],placeholder:r.showPlaceholder,style:{height:"30px"}},null,8,bt),yt])])])])}const gt=ue(ut,[["render",Vt]]),wt={name:"CommonSelect",components:{ElOption:se,ElSelect:oe},data(){return{visible:!1,renderId:"",modelValue:"",isObjectValue:!1,opsData:[],curInstance:null,attrs:{},el:null,isMounted:!1}},watch:{renderId(t){t&&(this.isMounted=!0)}},beforeUnmount(){console.log("公用组件销毁了 ")},methods:{change(t){this.curInstance.updateValue(t)},blur(){this.visible=this.$refs.CommonSelect.visible},async toggleMenu({renderId:t,curInstance:s,attrs:a,curValue:n,isObjectValue:o,opsData:r}){if(this.renderId===t&&this.visible){this.visible=!1;return}this.attrs=a,this.isObjectValue=o,this.modelValue=n,this.opsData=r,this.renderId=t,this.curInstance=s,await this.$nextTick(),this.$refs.CommonSelect.toggleMenu()}}};function It(t,s,a,n,o,r){const d=se,c=oe;return o.isMounted?(i(),E(je,{key:0,to:`#${o.renderId}`},[(i(),E(c,ne({ref:"CommonSelect"},o.attrs,{key:o.renderId,modelValue:o.modelValue,"onUpdate:modelValue":s[0]||(s[0]=m=>o.modelValue=m),class:"common-select",onChange:r.change,onBlur:r.blur}),{default:C(()=>[(i(!0),f(S,null,$(o.opsData,m=>(i(),E(d,{key:m.id,label:m[o.attrs["label-key"]],value:o.isObjectValue?m:m[o.attrs["value-key"]]},null,8,["label","value"]))),128))]),_:1},16,["modelValue","onChange","onBlur"]))],8,["to"])):R("",!0)}const Nt=ue(wt,[["render",It]]);let W,ae,re;const le=[],Et=t=>(le.push(t),W||(re=document.createElement("div"),ae=Ke(Nt),W=ae.mount(re),W)),kt=()=>{ae.unmount(),ae=void 0,W=void 0,re=void 0},St=t=>{const s=le.findIndex(a=>a===t);s!==-1&&(le.splice(s,1),le.length===0&&kt())};const xt={name:"VSelector",components:{StyleSelect:gt},inheritAttrs:!1,props:{modelValue:{default:""},isObjectValue:{type:Boolean,default:!1},opsData:{type:Array,default:()=>[]}},emits:["update:modelValue"],data(){return{renderId:Ge(10),CommonSelect:null}},computed:{selfAttrs(){let t=!1;const{multiple:s,...a}=this.$attrs;return(typeof s=="string"||s===!0)&&(t=!0),{"label-key":"label","value-key":"id",multiple:t,...a}},selectedData(){const t=this.selfAttrs["value-key"];return this.selfAttrs.multiple?this.modelValue.map(s=>this.opsData.find(a=>a[t]===this.getOpsKey(s))):this.opsData.find(s=>s[t]===this.getOpsKey(this.modelValue))}},mounted(){this.CommonSelect=Et(this.renderId)},beforeUnmount(){St(this.renderId)},methods:{toggleMenu(){this.CommonSelect.toggleMenu({renderId:this.renderId,curInstance:this,attrs:this.selfAttrs,curValue:this.modelValue,isObjectValue:this.isObjectValue,opsData:this.opsData})},updateValue(t){this.$emit("update:modelValue",t)},deleteItem(t){const s=this.modelValue.findIndex(n=>{let o=n;return this.isObjectValue&&(o=n[this.selfAttrs["value-key"]]),o===t[this.selfAttrs["value-key"]]}),a=[...this.modelValue];a.splice(s,1),this.$emit("update:modelValue",a)},getOpsKey(t){return this.isObjectValue?t[this.selfAttrs["value-key"]]:t}}},Dt=["id"];function Ct(t,s,a,n,o,r){const d=ze("StyleSelect");return i(),f("div",{class:"virtual-select",onClick:s[0]||(s[0]=ee(()=>{},["stop"]))},[x(d,ne(r.selfAttrs,{"selected-data":r.selectedData,"is-object-value":a.isObjectValue,onToggleMenu:r.toggleMenu,onDeleteItem:r.deleteItem}),null,16,["selected-data","is-object-value","onToggleMenu","onDeleteItem"]),h("div",{id:o.renderId,class:"common-select"},null,8,Dt)])}const At=ue(xt,[["render",Ct],["__scopeId","data-v-4985c3c5"]]),Tt={inheritAttrs:!1},_e=Object.assign(Tt,{__name:"testSelect",props:{useV:{type:Boolean,default:!0},modelValue:{},opsData:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(t,{emit:s}){const a=t,n=Re(),o=F({get:()=>a.modelValue,set:r=>{s("update:modelValue",r)}});return(r,d)=>{const c=se,m=oe;return a.useV?(i(),E(At,ne({key:0},u(n),{modelValue:u(o),"onUpdate:modelValue":d[0]||(d[0]=_=>me(o)?o.value=_:null),"ops-data":a.opsData}),null,16,["modelValue","ops-data"])):(i(),E(m,ne({key:1},u(n),{modelValue:u(o),"onUpdate:modelValue":d[1]||(d[1]=_=>me(o)?o.value=_:null)}),{default:C(()=>[(i(!0),f(S,null,$(t.opsData,_=>(i(),E(c,{key:_.id,label:_.label,value:_.id},null,8,["label","value"]))),128))]),_:1},16,["modelValue"]))}}});const $t={class:"container"},Mt={class:"title"},Ot={style:{width:"250px"}},Pt={style:{width:"250px"}},Ut={style:{width:"250px"}},Bt={class:"flex-wrapper"},Ft={class:"flex-wrapper"},Lt={class:"flex-wrapper"},jt={class:"flex-wrapper"},Kt={__name:"index",setup(t){const s=A(1),a=[{id:0,label:"0000"},{id:1,label:"aaaa"},{id:2,label:"bbbb"},{id:3,label:"cccc"}],n=A([]),o=A([]),r=A(150),d=A(150),c=()=>{r.value=d.value};q(()=>r.value,D=>{n.value=new Array(D).fill([0]),o.value=new Array(D).fill(0)},{immediate:!0});const m=A([0,0,0]),_=A([0,0,0]),M=A([0,0,0]);q([()=>o,()=>n],async D=>{const g=new Date;await new Promise(N=>setTimeout(()=>N()));const w=new Date-g;s.value===1?M.value[2]=(M.value[2]+w)/((M.value[2]!==0)+1):s.value===2?_.value[2]=(_.value[2]+w)/((_.value[2]!==0)+1):s.value===3&&(m.value[2]=(m.value[2]+w)/((m.value[2]!==0)+1))},{deep:!0});const L=A(!1);q(()=>s.value,async(D,g)=>{const w=new Date;L.value=!1,await new Promise(B=>setTimeout(()=>B()));const N=new Date;g===1?M.value[1]=N-w:g===2?_.value[1]=N-w:g===3&&(m.value[1]=N-w>20?N-w:0),L.value=!0,await new Promise(B=>setTimeout(()=>B()));const U=new Date;D===1?M.value[0]=U-N:D===2?_.value[0]=U-N:D===3&&(m.value[0]=U-N)},{immediate:!0});const j=F(()=>[{type:1,title:"单例模式",initTime:M.value},{type:2,title:"组件封装",initTime:_.value},{type:3,title:"正常模式",initTime:m.value}]);return console.log(j),(D,g)=>{const w=Me,N=Oe,U=ot,B=$e,K=se,z=oe;return i(),f("div",$t,[x(N,{modelValue:s.value,"onUpdate:modelValue":g[0]||(g[0]=b=>s.value=b)},{default:C(()=>[x(w,{label:1},{default:C(()=>[P(" 单例模式 ")]),_:1}),x(w,{label:2},{default:C(()=>[P(" 组件封装 ")]),_:1}),x(w,{label:3},{default:C(()=>[P(" 正常模式 ")]),_:1})]),_:1},8,["modelValue"]),P("  渲染下拉框数量"),x(U,{modelValue:d.value,"onUpdate:modelValue":g[1]||(g[1]=b=>d.value=b),style:{width:"150px"},max:500},null,8,["modelValue"]),x(B,{onClick:c},{default:C(()=>[P(" 重选渲染 ")]),_:1}),(i(!0),f(S,null,$(u(j),b=>(i(),f("div",{key:b.type,class:"time-wrapper"},[h("div",Mt,G(b.title),1),h("div",Ot," 初始化时间:"+G(b.initTime[0])+"ms ",1),h("div",Pt," 销毁时间:"+G(b.initTime[1])+"ms ",1),h("div",Ut," 平均更新时间:"+G(b.initTime[2].toFixed(2))+"ms ",1)]))),128)),[1,2].includes(s.value)&&L.value?(i(),f(S,{key:0},[P(" 单选： "),h("div",Bt,[(i(!0),f(S,null,$(o.value,(b,v)=>(i(),E(_e,{key:v,modelValue:o.value[v],"onUpdate:modelValue":y=>o.value[v]=y,"use-v":s.value===1,"ops-data":a},null,8,["modelValue","onUpdate:modelValue","use-v"]))),128))]),P(" 多选： "),h("div",Ft,[(i(!0),f(S,null,$(n.value,(b,v)=>(i(),E(_e,{key:v,modelValue:n.value[v],"onUpdate:modelValue":y=>n.value[v]=y,multiple:"","use-v":s.value===1,"ops-data":a},null,8,["modelValue","onUpdate:modelValue","use-v"]))),128))])],64)):R("",!0),s.value===3&&L.value?(i(),f(S,{key:1},[P(" 单选： "),h("div",Lt,[(i(!0),f(S,null,$(o.value,(b,v)=>(i(),E(z,{key:v,modelValue:o.value[v],"onUpdate:modelValue":y=>o.value[v]=y},{default:C(()=>[(i(),f(S,null,$(a,y=>x(K,{key:y.id,label:y.label,value:y.id},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))]),P(" 多选： "),h("div",jt,[(i(!0),f(S,null,$(n.value,(b,v)=>(i(),E(z,{key:v,modelValue:n.value[v],"onUpdate:modelValue":y=>n.value[v]=y,multiple:""},{default:C(()=>[(i(),f(S,null,$(a,y=>x(K,{key:y.id,label:y.label,value:y.id},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"]))),128))])],64)):R("",!0)])}}},pl=ue(Kt,[["__scopeId","data-v-82246653"]]);export{pl as default};
