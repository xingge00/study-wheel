import{_ as p,o as s,c,L as u,a2 as L,t as D,M as B,S as I,i as n,G as $,F as m,v as g,b as h,Y as N,C as _,H as x,am as S,an as U,R as y,r as V,P as R,a3 as C,I as M}from"./index-ff1f1369.js";const P={},j={class:"node-wrapper"},O=u("div",{class:"c-circle c-start"}," start ",-1),Y=[O];function E(a,d){return s(),c("div",j,Y)}const F=p(P,[["render",E]]),X={},z={class:"node-wrapper"},G=u("div",{class:"c-circle c-if"}," if ",-1),H=[G];function T(a,d){return s(),c("div",z,H)}const q=p(X,[["render",T]]);const J=["onClick"],K={key:0,class:"line"},Q={__name:"AddNodeBtn",props:{endLine:{type:Boolean,default:!0}},emits:["addNode"],setup(a,{emit:d}){const l=L(),e=D("addNodeDialogRef"),r=t=>{if(t.id==="canvas-main"||!t)return{x:0,y:0};const i=r(t.offsetParent);return{x:i.x+t.offsetLeft,y:i.y+t.offsetTop}},o=t=>{console.log(t.target);const{x:i,y:f}=r(t.target);e.value.show({x:t.offsetX+i,y:t.offsetY+f})};return(t,i)=>(s(),c(m,null,[u("div",B({class:"add-node"},n(l),{onClick:I(o,["stop"])})," + ",16,J),a.endLine?(s(),c("div",K)):$("",!0)],64))}},w=p(Q,[["__scopeId","data-v-9b361202"]]);const k=a=>(S("data-v-ac50603f"),a=a(),U(),a),W={class:"node-wrapper"},Z=k(()=>u("div",{class:"c-circle c-switch"}," switch ",-1)),ee=k(()=>u("div",{class:"line"},null,-1)),te={__name:"Switch",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(a,{emit:d}){const l=a,e=g({get:()=>l.modelValue.branch,set:o=>d("update:modelValue",{...l.modelValue,branch:o})}),r=()=>{e.value.push([])};return(o,t)=>{var i;return s(),c(m,null,[u("div",W,[Z,ee,h(w,{class:"on-bottom","end-line":!1,onAddNode:r})]),u("div",{class:"branch-wrapper branch-wrapper-width",style:x({"--var-branch-count":((i=n(e))==null?void 0:i.length)||1})},[(s(!0),c(m,null,N(n(e),(f,v)=>(s(),_(b,{key:v,modelValue:n(e)[v],"onUpdate:modelValue":A=>n(e)[v]=A},null,8,["modelValue","onUpdate:modelValue"]))),128))],4)],64)}}},oe=p(te,[["__scopeId","data-v-ac50603f"]]),se={},ae={class:"node-wrapper"},ne=u("div",{class:"c-circle c-end"}," end ",-1),de=[ne];function le(a,d){return s(),c("div",ae,de)}const ce=p(se,[["render",le]]),re={},ie={class:"node-wrapper"},ue=u("div",{class:"c-circle c-other"}," other ",-1),_e=[ue];function pe(a,d){return s(),c("div",ie,_e)}const me=p(re,[["render",pe]]),fe=u("div",{class:"line"},null,-1),ve={__name:"RenderItem",props:{modelValue:{type:Object,default:()=>({})}},emits:["update:modelValue","addNode"],setup(a,{emit:d}){const l=a,e=g({get:()=>l.modelValue,set:r=>d("update:modelValue",r)});return(r,o)=>(s(),c(m,null,[n(e).type==="start"?(s(),_(F,{key:0,modelValue:n(e),"onUpdate:modelValue":o[0]||(o[0]=t=>y(e)?e.value=t:null)},null,8,["modelValue"])):n(e).type==="if"?(s(),_(q,{key:1,modelValue:n(e),"onUpdate:modelValue":o[1]||(o[1]=t=>y(e)?e.value=t:null)},null,8,["modelValue"])):n(e).type==="switch"?(s(),_(oe,{key:2,modelValue:n(e),"onUpdate:modelValue":o[2]||(o[2]=t=>y(e)?e.value=t:null)},null,8,["modelValue"])):n(e).type==="end"?(s(),_(ce,{key:3,modelValue:n(e),"onUpdate:modelValue":o[3]||(o[3]=t=>y(e)?e.value=t:null)},null,8,["modelValue"])):(s(),_(me,{key:4,modelValue:n(e),"onUpdate:modelValue":o[4]||(o[4]=t=>y(e)?e.value=t:null)},null,8,["modelValue"])),n(e).type!=="end"?(s(),c(m,{key:5},[fe,h(w,{onAddNode:o[5]||(o[5]=t=>d("addNode"))})],64)):$("",!0)],64))}},ye={class:"render-list-wrapper"},he=u("div",{class:"line"},null,-1),b={__name:"RenderList",props:{modelValue:{type:Array,default:()=>[]},startLine:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(a,{emit:d}){const l=a,e=g({get:()=>l.modelValue,set:o=>d("update:modelValue",o)}),r=o=>{const t={id:Date.now(),type:"text",content:""};e.value.splice(o+1,0,t)};return(o,t)=>(s(),c("div",ye,[a.startLine?(s(),c(m,{key:0},[he,h(w,{onAddNode:t[0]||(t[0]=()=>r(-1))})],64)):$("",!0),(s(!0),c(m,null,N(n(e),(i,f)=>(s(),_(ve,{key:i.id,modelValue:n(e)[f],"onUpdate:modelValue":v=>n(e)[f]=v,onAddNode:()=>r(f)},null,8,["modelValue","onUpdate:modelValue","onAddNode"]))),128))]))}};const Ve={__name:"AddNodeDialog",setup(a,{expose:d}){const l=V({x:1,y:1}),e=V(!1);return d({show:t=>{console.log("pos",t),l.value=t,e.value=!0},close:()=>{e.value=!1}}),(t,i)=>R((s(),c("div",{class:"add-node-dialog",style:x({"--var-dialog-left":`${l.value.x}px`,"--var-dialog-top":`${l.value.y}px`})},null,4)),[[C,e.value]])}},$e=p(Ve,[["__scopeId","data-v-08f47cf0"]]);const ge={class:"canvas-main",id:"canvas-main"},we={__name:"Main",setup(a){const d=V([{id:"0",type:"start"},{id:"1",type:"if"},{id:"122",type:"ifds"},{id:"2",type:"switch",branch:[[{id:"2-1-2",type:"aaa"}],[{id:"2-2-1",type:"aaa"}],[]]},{id:"3",type:"switch",branch:[]},{id:"4",type:"aaa"},{id:"999",type:"end"}]),l=V(null);return M("addNodeDialogRef",l),(e,r)=>(s(),c("div",ge,[h(b,{modelValue:d.value,"onUpdate:modelValue":r[0]||(r[0]=o=>d.value=o),"start-line":!1},null,8,["modelValue"]),h($e,{ref_key:"addNodeDialogRef",ref:l},null,512)]))}},Ne=p(we,[["__scopeId","data-v-81a394d2"]]),ke={__name:"index",setup(a){return(d,l)=>(s(),_(Ne))}};export{ke as default};
